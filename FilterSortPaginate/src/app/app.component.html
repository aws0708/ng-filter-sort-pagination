<div class="container my-4">
  <div class="row mb-3">
    <div class="col-12 d-flex justify-content-between align-items-center">
      <h4 class="mb-0">Users</h4>
      <span class="badge bg-secondary">
        Total: {{ users.length }}
      </span>
    </div>
  </div>

  <!-- FILTER CARD -->
  <div class="card mb-3">
    <div class="card-header d-flex justify-content-between align-items-center">
      <span>Filters</span>
      <button class="btn btn-sm btn-outline-secondary cursor-pointer" type="button" (click)="clearFilters()">
        Clear filters
      </button>
    </div>

    <div class="card-body">
      <div class="row g-3">
        <!-- Name filter -->
        <div class="col-md-4">
          <div class="form-check mb-2">
            <input class="form-check-input" type="checkbox" id="nameFilterCheck" [(ngModel)]="enableNameFilter"
              (ngModelChange)="onFilterChange()" />
            <label class="form-check-label cursor-pointer" for="nameFilterCheck">
              Filter by Name
            </label>
          </div>
          <input type="text" class="form-control" placeholder="Enter name" [(ngModel)]="nameFilter"
            (ngModelChange)="onFilterChange()" [disabled]="!enableNameFilter" />
        </div>

        <!-- Age filter -->
        <div class="col-md-4">
          <div class="form-check mb-2">
            <input class="form-check-input" type="checkbox" id="ageFilterCheck" [(ngModel)]="enableAgeFilter"
              (ngModelChange)="onFilterChange()" />
            <label class="form-check-label cursor-pointer" for="ageFilterCheck">
              Filter by Age Range
            </label>
          </div>
          <div class="input-group">
            <input type="number" class="form-control" placeholder="Min" [(ngModel)]="minAgeFilter"
              (ngModelChange)="onFilterChange()" [disabled]="!enableAgeFilter" />
            <span class="input-group-text">-</span>
            <input type="number" class="form-control" placeholder="Max" [(ngModel)]="maxAgeFilter"
              (ngModelChange)="onFilterChange()" [disabled]="!enableAgeFilter" />
          </div>
        </div>

        <!-- City filter -->
        <div class="col-md-4">
          <div class="form-check mb-2">
            <input class="form-check-input" type="checkbox" id="cityFilterCheck" [(ngModel)]="enableCityFilter"
              (ngModelChange)="onFilterChange()" />
            <label class="form-check-label cursor-pointer" for="cityFilterCheck">
              Filter by City
            </label>
          </div>
          <input type="text" class="form-control" placeholder="Enter city" [(ngModel)]="cityFilter"
            (ngModelChange)="onFilterChange()" [disabled]="!enableCityFilter" />
        </div>
      </div>
    </div>
  </div>

  <!-- TABLE -->
  <div class="card">
    <div class="card-body p-0">
      <div class="table-responsive">
        <table class="table table-sm table-striped table-hover table-bordered mb-0 align-middle" style="table-layout: fixed; width: 100%;">
          <thead class="table-light">
            <tr>
              <th scope="col" (click)="sort('id')" class="text-nowrap">
                ID
                <span *ngIf="sortColumn === 'id'" class="ms-1">
                  {{ sortDirection === 'asc' ? '▲' : '▼' }}
                </span>
              </th>
              <th scope="col" (click)="sort('name')" class="text-nowrap">
                Name
                <span *ngIf="sortColumn === 'name'" class="ms-1">
                  {{ sortDirection === 'asc' ? '▲' : '▼' }}
                </span>
              </th>
              <th scope="col" (click)="sort('age')" class="text-nowrap">
                Age
                <span *ngIf="sortColumn === 'age'" class="ms-1">
                  {{ sortDirection === 'asc' ? '▲' : '▼' }}
                </span>
              </th>
              <th scope="col" (click)="sort('city')" class="text-nowrap">
                City
                <span *ngIf="sortColumn === 'city'" class="ms-1">
                  {{ sortDirection === 'asc' ? '▲' : '▼' }}
                </span>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let user of pagedUsers">
              <td>{{ user.id }}</td>
              <td>{{ user.name }}</td>
              <td>{{ user.age }}</td>
              <td>{{ user.city }}</td>
            </tr>
            <tr *ngIf="pagedUsers.length === 0">
              <td colspan="4" class="text-center text-muted py-3">
                No records found
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- FOOTER: pagination + info -->
    <div class="card-footer d-flex flex-column flex-md-row justify-content-between align-items-center">
      <div class="small text-muted mb-2 mb-md-0">
        Showing <strong>{{ pagedUsers.length }}</strong> of
        <strong>{{ filteredUsers.length }}</strong> filtered records
        · Page {{ currentPage }} / {{ totalPages }}
      </div>

      <nav aria-label="User table pagination">
        <ul class="pagination pagination-sm mb-0">
          <li class="page-item" [class.disabled]="currentPage === 1">
            <button class="page-link cursor-pointer" (click)="changePage(currentPage - 1)" [disabled]="currentPage === 1"
              type="button">
              Previous
            </button>
          </li>

          <li class="page-item" *ngFor="let p of pages" [class.active]="currentPage === p">
            <button class="page-link cursor-pointer" (click)="changePage(p)">
              {{ p }}
            </button>
          </li>

          <li class="page-item" [class.disabled]="currentPage === totalPages">
            <button class="page-link cursor-pointer" (click)="changePage(currentPage + 1)" [disabled]="currentPage === totalPages"
              type="button">
              Next
            </button>
          </li>
        </ul>
      </nav>
    </div>
  </div>
</div>
<router-outlet />